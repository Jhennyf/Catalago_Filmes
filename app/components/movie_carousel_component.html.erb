<section class="mb-28 w-full flex flex-col items-center mt-28">
  <div class="flex w-full items-center justify-center text-center">
    <h2 class="text-3xl font-bold text-white mb-8 w-full text-center">
      <%= title %>
    </h2>
  </div>
  <div data-controller="carousel" class="relative w-full max-w-7xl mx-auto h-[600px] overflow-hidden">
    <div data-carousel-target="track" class="flex transition-transform duration-500 w-full h-[600px] gap-12 px-40">
      <% movies.each do |movie| %>
        <div class="min-w-[350px] max-w-xs flex-shrink-0 flex flex-col items-center justify-start relative overflow-hidden">
          <%= image_tag movie.image_url, alt: movie.title, class: "w-full h-[420px] object-cover" %>
          <div class="p-6 flex flex-col items-start w-full bg-transparent">
            <div class="flex justify-between w-full text-xs text-gray-400 mb-2">
              <%= movie.realease_year %>
              <span>Diretor: <%= movie.director if defined?(movie.director) %></span>
                <span>
                  <%= "#{movie.duration} min" if movie.duration.present? %>
                </span>
            </div>
            <h2 class="text-lg font-bold text-gray-900 dark:text-white mb-2"><%= movie.title %></h2>
            <p class="text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-2"><%= movie.synopsis %></p>
            <% if button_text == "Excluir filme" %>
              <%= button_to (button_path ? button_path.call(movie) : movie),
                    method: :delete,
                    data: { turbo_confirm: "Tem certeza que quer excluir '#{movie.title}'?" },
                    class: "inline-block bg-red-600 hover:bg-red-700 text-white text-xs font-bold py-2 px-4 rounded-lg transition-colors duration-300" do %>
                <%= button_text %>
              <% end %>
            <% else %>
              <%= link_to button_text, (button_path ? button_path.call(movie) : movie),
                    class: "inline-block bg-red-600 hover:bg-red-700 text-white text-xs font-bold py-2 px-4 rounded-lg transition-colors duration-300" %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
    <button data-action="carousel#prev" class="absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-transparent hover:bg-black/40 text-white p-2 rounded-full transition">
      <svg class="w-10 h-10" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
      </svg>
    </button>
    <button data-action="carousel#next" class="absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-transparent hover:bg-black/40 text-white p-2 rounded-full transition">
      <svg class="w-10 h-10" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
      </svg>
    </button>
  </div>
</section>